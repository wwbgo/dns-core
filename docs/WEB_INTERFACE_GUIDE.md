# Web 管理界面使用指南

## 概述

DNS Core Server 提供了一个现代化的 Web 管理界面，让您可以通过浏览器轻松管理 DNS 记录。

## 访问界面

1. **启动服务器**
   ```bash
   # Windows（以管理员身份运行）
   start-server.bat

   # Linux/Mac
   ./start-server.sh
   ```

2. **打开浏览器**
   ```
   http://localhost:5000
   ```

## 界面功能

### 1. 状态栏

位于页面顶部，显示：
- **服务状态**: ✅ 正常运行 / ❌ 离线
- **记录总数**: 当前存储的 DNS 记录数量
- **刷新按钮**: 手动刷新记录列表

### 2. 添加记录表单

#### 字段说明

| 字段 | 说明 | 示例 | 必填 |
|------|------|------|------|
| 域名 | 要解析的域名 | example.local | ✅ |
| 记录类型 | DNS 记录类型 | A, AAAA, CNAME 等 | ✅ |
| 记录值 | 解析结果 | 192.168.1.100 | ✅ |
| TTL | 生存时间（秒） | 3600 | ❌ |

#### 支持的记录类型

- **A** - IPv4 地址记录
  - 示例值: `192.168.1.100`
- **AAAA** - IPv6 地址记录
  - 示例值: `2001:db8::1`
- **CNAME** - 别名记录
  - 示例值: `target.example.com`
- **TXT** - 文本记录
  - 示例值: `v=spf1 include:_spf.google.com ~all`
- **NS** - 名称服务器记录
  - 示例值: `ns1.example.com`
- **MX** - 邮件交换记录
  - 示例值: `mail.example.com`
- **PTR** - 指针记录
  - 示例值: `host.example.com`

#### 添加记录步骤

1. 在"域名"字段输入域名（如 `test.local`）
2. 选择"记录类型"（如 `A`）
3. 在"记录值"字段输入对应的值（如 `192.168.1.100`）
4. 设置 TTL（可选，默认 3600 秒）
5. 点击"➕ 添加记录"按钮
6. 看到成功提示后，记录将出现在列表中

### 3. 记录列表

#### 功能特性

- **搜索过滤**: 在搜索框中输入关键词，实时过滤记录
  - 支持搜索域名、类型、记录值
- **自动刷新**: 每 30 秒自动刷新一次
- **彩色标签**: 不同记录类型显示不同颜色
  - A: 蓝色
  - AAAA: 紫色
  - CNAME: 绿色
  - TXT: 橙色
  - NS: 青色
  - MX: 红色
  - PTR: 灰色

#### 表格列说明

| 列名 | 说明 |
|------|------|
| 域名 | DNS 域名 |
| 类型 | 记录类型（带颜色标签） |
| 记录值 | 解析结果值 |
| TTL | 生存时间（秒） |
| 操作 | 删除按钮 |

### 4. 记录操作

#### 删除单条记录

1. 找到要删除的记录
2. 点击该记录行最右侧的"🗑️ 删除"按钮
3. 在确认对话框中点击"确定"
4. 记录将被删除并从列表中移除

#### 清空所有记录

1. 点击表单下方的"🗑️ 清空所有记录"按钮
2. 在第一次确认对话框中点击"确定"
3. 在第二次确认对话框中再次点击"确定"
4. 所有记录将被清空

**⚠️ 警告**: 此操作不可撤销，请谨慎使用！

## 使用示例

### 示例 1: 添加本地域名解析

**场景**: 将 `dev.local` 解析到本地开发服务器 `192.168.1.100`

1. 域名: `dev.local`
2. 类型: `A`
3. 记录值: `192.168.1.100`
4. TTL: `3600`
5. 点击"添加记录"

**测试**:
```bash
nslookup dev.local 127.0.0.1
```

### 示例 1.5: 添加泛域名记录

**场景**: 将所有 `*.dev.local` 子域名解析到 `10.0.0.1`

1. 域名: `*.dev.local`
2. 类型: `A`
3. 记录值: `10.0.0.1`
4. TTL: `3600`
5. 点击"添加记录"

**测试**:
```bash
# 以下查询都会返回 10.0.0.1
nslookup api.dev.local 127.0.0.1
nslookup www.dev.local 127.0.0.1
nslookup anything.dev.local 127.0.0.1

# 但 dev.local 本身不会匹配
nslookup dev.local 127.0.0.1  # 不会返回 10.0.0.1
```

### 示例 2: 添加别名记录

**场景**: 将 `www.example.local` 指向 `example.local`

1. 域名: `www.example.local`
2. 类型: `CNAME`
3. 记录值: `example.local`
4. TTL: `3600`
5. 点击"添加记录"

### 示例 3: 添加 TXT 记录

**场景**: 添加 SPF 记录用于邮件验证

1. 域名: `example.local`
2. 类型: `TXT`
3. 记录值: `v=spf1 include:_spf.google.com ~all`
4. TTL: `3600`
5. 点击"添加记录"

## 提示消息

界面右上角会显示操作提示：

- **绿色提示**: 操作成功
  - "✅ 成功添加记录: example.local"
  - "✅ 成功删除记录: example.local"
  - "✅ 已清空所有记录"

- **红色提示**: 操作失败
  - "❌ 添加记录失败: [错误信息]"
  - "❌ 删除记录失败: [错误信息]"
  - "❌ 无法连接到服务器"

- **蓝色提示**: 信息提示
  - "成功加载 5 条记录"

提示会在 3 秒后自动消失。

## 技术特性

### 响应式设计

- 自动适配桌面、平板和手机屏幕
- 在移动设备上表单和按钮会自动调整布局

### 实时更新

- 每 30 秒自动从服务器获取最新记录
- 所有操作（添加、删除）立即生效
- 无需手动刷新页面

### 用户体验

- 现代化的渐变背景设计
- 流畅的动画效果
- 清晰的视觉反馈
- 友好的错误提示

## 快捷键

- **Tab**: 在表单字段之间切换
- **Enter**: 提交添加记录表单
- **Ctrl+F**: 聚焦到搜索框（浏览器默认）

## 常见问题

### Q: 为什么看不到记录列表？

A: 请检查：
1. 服务器是否正常运行（查看状态栏）
2. 浏览器控制台是否有错误信息（F12）
3. API 端口是否被防火墙拦截

### Q: 添加记录后没有生效？

A: 请确认：
1. 表单所有必填字段都已填写
2. 记录值格式正确（如 A 记录必须是有效的 IPv4 地址）
3. 查看右上角是否有成功提示

### Q: 如何测试添加的 DNS 记录？

A: 使用以下命令：

**Windows**:
```cmd
nslookup example.local 127.0.0.1
```

**Linux/Mac**:
```bash
dig @127.0.0.1 example.local
```

### Q: 可以同时管理多个相同域名的不同类型记录吗？

A: 可以！同一个域名可以有多个不同类型的记录，例如：
- `example.local A 192.168.1.100`
- `example.local AAAA 2001:db8::1`
- `example.local TXT "v=spf1 ~all"`

## 安全建议

1. **生产环境**: 建议在生产环境中：
   - 使用 HTTPS
   - 启用身份验证
   - 限制访问 IP

2. **网络隔离**: 仅在受信任的网络中使用

3. **定期备份**: 定期导出配置文件备份

## 相关链接

- **Swagger API 文档**: http://localhost:5000/swagger
- **健康检查端点**: http://localhost:5000/health
- **项目文档**: [README.md](../README.md)
